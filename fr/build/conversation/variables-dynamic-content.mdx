---
title: "Variables et contenu dynamique"
description: "Utilisez la mod√©lisation Jinja pour personnaliser les instructions et accueils de l'agent"
icon: "brackets-curly"
"keywords": "Variables de mod√®le IA, mod√®les Jinja, contenu dynamique, conversations IA personnalis√©es, syntaxe de mod√®le, logique conditionnelle, personnalisation IA"
"og:description": "Ma√Ætrisez les variables de mod√®le Jinja pour cr√©er des conversations d'agent IA dynamiques et personnalis√©es avec logique conditionnelle et donn√©es personnalis√©es."
---

## Aper√ßu

Les variables vous permettent de personnaliser les instructions de votre agent avec des donn√©es dynamiques. itellicoAI utilise la [mod√©lisation Jinja2](https://jinja.palletsprojects.com/en/stable/).

---

## Comment fonctionnent les variables

### Variables de contact int√©gr√©es

Si un contact existe dans votre compte itellicoAI, ces 5 champs sont automatiquement disponibles :

```jinja wrap
{{ contact.first_name }}
{{ contact.last_name }}
{{ contact.full_name }}
{{ contact.email }}
{{ contact.phone }}
```

**Exemple :**
```jinja wrap
Bonjour {{ contact.first_name }} !
Votre email est {{ contact.email }}.
```

‚úÖ Aucune configuration n√©cessaire - fonctionne automatiquement si le contact existe

---

### Tout le reste : API de contexte dynamique

**Toutes les autres donn√©es** doivent provenir de votre [point d'acc√®s API de contexte dynamique](/fr/build/advanced/dynamic-context) en tant que **variables de niveau sup√©rieur**.

Vous pouvez retourner tous les champs que vous souhaitez. Par exemple :

```jinja wrap
{{ language }}
{{ account_tier }}
{{ company_name }}
{{ order_id }}
{{ customer_since }}
{{ any_field_you_need }}
```

**Exemple - Votre API retourne :**
```json
{
  "language": "fr",
  "account_tier": "premium",
  "company_name": "Acme Corp"
}
```

**Ensuite votre agent peut utiliser :**
```jinja wrap
{% if language == "fr" %}
Bonjour ! Vous travaillez pour {{ company_name }}.
{% endif %}

{% if account_tier == "premium" %}
Support prioritaire disponible.
{% endif %}
```

‚öôÔ∏è N√©cessite une configuration - voir [API de contexte dynamique](/fr/build/advanced/dynamic-context)

---

## Variables disponibles

### Variables de contact int√©gr√©es

Ces variables sont automatiquement disponibles depuis vos contacts itellicoAI :

```jinja wrap
{{ contact.first_name }}
{{ contact.last_name }}
{{ contact.full_name }}
{{ contact.email }}
{{ contact.phone }}
```

**Exemple d'utilisation :**

```text wrap
Vous parlez avec {{ contact.first_name }} {{ contact.last_name }}.
Leur email est {{ contact.email | default("non fourni") }}.
Leur num√©ro de t√©l√©phone est {{ contact.phone }}.

```

<Note>
**Les champs personnalis√©s** ne sont PAS imbriqu√©s sous `contact.` ‚Äî ce sont des variables de niveau sup√©rieur comme `{{ language }}` ou `{{ account_tier }}`. Vous devez les fournir via votre [API de contexte dynamique](/fr/build/advanced/dynamic-context).
</Note>

### Variables de contexte dynamique

Toutes les donn√©es personnalis√©es que vous fournissez via votre point d'acc√®s API de contexte dynamique deviennent disponibles en tant que variables de **niveau sup√©rieur** :

```jinja wrap
{{ account_tier }}
{{ language }}
{{ company_name }}
{{ preferred_contact_method }}
```

**Exemple avec variables personnalis√©es :**

```jinja wrap
{% if account_tier == "premium" %}
En tant que client premium, vous avez un support prioritaire.
{% endif %}

{% if language == "fr" %}
Parlez fran√ßais.
{% endif %}

Entreprise : {{ company_name | default("client appr√©ci√©") }}

```

<Tip>
Configurez un point d'acc√®s API de contexte dynamique pour fournir des variables personnalis√©es. Tous les champs JSON que vous retournez deviennent des variables de niveau sup√©rieur (par ex., `{"language": "fr"}` ‚Üí `{{ language }}`).
</Tip>

### Date et heure

La date et l'heure actuelles sont automatiquement disponibles sous `current_datetime` dans les **accueils et instructions** :

```jinja wrap
{{ current_datetime }}                      # Horodatage actuel
{{ current_datetime.hour }}                 # Heure actuelle (0-23)
{{ current_datetime | datetime("%H:%M") }}  # Format avec filtre datetime
{{ current_datetime | datetime("%A") }}     # Nom du jour (Lundi, Mardi, etc.)
```

**Exemple d'utilisation :**

```jinja wrap
{% if current_datetime.hour < 12 %}
Bonjour, {{ contact.first_name }} !
{% elif current_datetime.hour < 17 %}
Bon apr√®s-midi, {{ contact.first_name }} !
{% else %}
Bonsoir, {{ contact.first_name }} !
{% endif %}
```

<Tip>
Utilisez `current_datetime` pour construire une logique avanc√©e bas√©e sur l'heure comme le routage selon les heures d'ouverture, les accueils selon l'heure de la journ√©e ou les contraintes de planification sans avoir besoin de sources de donn√©es externes.
</Tip>

<Note>
Utilisez le filtre `datetime` pour le formatage. La m√©thode `.strftime()` n'est pas disponible en raison de restrictions de s√©curit√©.
</Note>

---

## Logique conditionnelle

### Instruction If

```jinja wrap
{% if condition %}
  Ceci s'affiche si la condition est vraie
{% endif %}
```

### If-Else

```jinja wrap
{% if account_tier == "VIP" %}
  Fournir un service VIP
{% else %}
  Fournir un service standard
{% endif %}
```

### If-Elif-Else

```jinja wrap
{% if account_value > 10000 %}
  Client de niveau Entreprise
{% elif account_value > 1000 %}
  Client de niveau Professionnel
{% else %}
  Client de niveau Standard
{% endif %}
```

### Exemple du monde r√©el

```jinja wrap
{% if language == "es" %}
R√©pondez en espagnol. Utilisez le vouvoiement (usted).
{% elif language == "fr" %}
R√©pondez en fran√ßais. Utilisez le vouvoiement (vous).
{% elif language == "de" %}
R√©pondez en allemand. Utilisez le vouvoiement (Sie).
{% else %}
R√©pondez en anglais. Utilisez un ton amical et conversationnel.
{% endif %}
```

---

## Filtres

Les filtres transforment les valeurs des variables.

### Filtres courants

**default :** Fournir une valeur de secours

```jinja wrap
{{ contact.first_name | default("") }}
```

**upper :** Convertir en majuscules

```jinja wrap
{{ contact.last_name | upper }}
```

**lower :** Convertir en minuscules

```jinja wrap
{{ contact.email | lower }}
```

**title :** Casse de titre

```jinja wrap
{{ contact.first_name | title }}
```

**length :** Obtenir la longueur

```jinja wrap
{% if contact.phone | length > 10 %}
  Num√©ro international d√©tect√©
{% endif %}
```

**datetime :** Formater les objets datetime

```jinja wrap
{{ current_datetime | datetime("%H:%M") }}         # 14:30
{{ current_datetime | datetime("%d.%m.%Y") }}      # 24.01.2025
{{ current_datetime | datetime("%A, %B %d") }}     # Lundi, 24 janvier
```

### Encha√Ænement de filtres

```jinja wrap
{{ contact.first_name | default("Ami") | title }}
```

---

## Boucles

It√©rer sur des listes (cas d'usage avanc√©) :

```jinja wrap
{% for item in list_variable %}
  Traiter {{ item }}
{% endfor %}
```

---

## Exemples pratiques

### Exemple 1 : Accueil personnalis√©

```jinja wrap
{% if contact.first_name %}
Bonjour {{ contact.first_name }}, ravi de vous entendre !
{% else %}
Bonjour ! Merci d'avoir appel√© !
{% endif %}

{% if contact.email %}
J'ai vos coordonn√©es dans le syst√®me, donc je peux vous envoyer une confirmation apr√®s notre appel.
{% endif %}
```

### Exemple 2 : Logique m√©tier personnalis√©e (N√©cessite l'API de contexte dynamique)

```jinja wrap
{% if contact.first_name %}
Bonjour {{ contact.first_name }}, merci d'avoir appel√© {{ company_name }} !
{% else %}
Bonjour ! Merci d'avoir appel√© {{ company_name }} !
{% endif %}

{% if account_tier == "premium" %}
En tant que client premium, vous avez un support prioritaire. Comment puis-je vous aider aujourd'hui ?
{% else %}
Comment puis-je vous aider aujourd'hui ?
{% endif %}
```

<Note>
Les variables comme `company_name` et `account_tier` doivent √™tre fournies par votre point d'acc√®s API de contexte dynamique.
</Note>

### Exemple 3 : Instructions bas√©es sur l'heure

```jinja wrap
Heure actuelle : {{ current_datetime | datetime("%H:%M") }}

{% if current_datetime.hour >= 17 or current_datetime.hour < 9 %}
En dehors des heures normales d'ouverture. Si le client a besoin d'une assistance imm√©diate :
"Nos heures de support r√©guli√®res sont de 9h √† 17h. Pour les probl√®mes urgents, je peux prendre vos informations et quelqu'un vous appellera d√®s le matin, ou vous pouvez joindre notre ligne d'urgence au [num√©ro]."
{% else %}
Pendant les heures d'ouverture. Support complet disponible.
{% endif %}
```

### Exemple 4 : Support multilingue (N√©cessite l'API de contexte dynamique)

```jinja wrap
Langue pr√©f√©r√©e du client : {{ language | default("fr") }}

{% if language == "es" %}
Langue : Espagnol
Accueil : "¬°Hola!"
Ton : Formel (utilisez "usted")
Collection de connaissances : "FAQ Espa√±ol"
{% elif language == "de" %}
Langue : Allemand
Accueil : "Guten Tag!"
Ton : Formel (utilisez "Sie")
Collection de connaissances : "FAQ Deutsch"
{% else %}
Langue : Fran√ßais
Accueil : "Bonjour !"
Ton : Amical et conversationnel
Collection de connaissances : "FAQ Fran√ßais"
{% endif %}
```

### Exemple 5 : Logique de niveau de compte

```jinja wrap
Valeur du compte : {{ account_value | default(0) }}‚Ç¨

{% if account_value >= 50000 %}
üåü CLIENT ENTREPRISE
- Offrir un service sur mesure
- Acc√®s direct au gestionnaire de compte
- Temps de r√©ponse prioritaires
- Solutions personnalis√©es disponibles
{% elif account_value >= 10000 %}
üíº CLIENT PROFESSIONNEL
- Niveau de support premium
- √âquipe de support d√©di√©e
- File d'attente prioritaire
{% else %}
üë§ CLIENT STANDARD
- Support standard
- Base de connaissances en premier
- Transfert pour les probl√®mes complexes
{% endif %}
```

---

## Tester les variables

### Tester avec diff√©rentes donn√©es

1. Allez dans **Appel test**
2. Testez des sc√©narios avec diff√©rentes donn√©es de contact :
   - Avec pr√©nom vs sans
   - Client VIP vs client standard
   - Diff√©rentes langues
   - Diff√©rents fuseaux horaires

### Probl√®mes courants

| Probl√®me | Cause | Solution |
|----------|-------|----------|
| La variable s'affiche vide | Aucune valeur par d√©faut fournie | Ajoutez `\| default("secours")` |
| Erreur de syntaxe | Faute de frappe dans le nom de variable | V√©rifiez l'orthographe par rapport aux variables disponibles |
| La condition ne fonctionne pas | Mauvais op√©rateur de comparaison | Utilisez `==` et non `=` |
| Le filtre ne s'applique pas | Le filtre n'existe pas | V√©rifiez l'orthographe du nom du filtre |

---

## Bonnes pratiques

<AccordionGroup>
  <Accordion title="Utilisez toujours des valeurs par d√©faut" icon="shield">
    Ne supposez jamais qu'une variable a une valeur. Fournissez toujours des valeurs par d√©faut.

    ‚ùå **Mauvais :**
    ```jinja
    Bonjour {{ contact.first_name }} !
    ```

    ‚úÖ **Bon :**
    ```jinja
    Bonjour {{ contact.first_name | default("") }} !
    ```
  </Accordion>

  <Accordion title="Gardez la logique simple" icon="lightbulb">
    Les conditions imbriqu√©es complexes sont difficiles √† d√©boguer. Gardez la simplicit√©.

    ‚ùå **Trop complexe :**
    ```jinja
    {% if account_tier == "VIP" and account_value > 10000 and region == "FR" %}
    ```

    ‚úÖ **Plus simple :**
    ```jinja
    {% if account_tier == "VIP" %}
    ```
  </Accordion>

  <Accordion title="Testez les cas limites" icon="vial">
    Testez avec :
    - Donn√©es manquantes (tous les champs vides)
    - Valeurs inattendues
    - Cha√Ænes tr√®s longues
    - Caract√®res sp√©ciaux
  </Accordion>
</AccordionGroup>

---

## Prochaines √©tapes

<CardGroup cols={2}>
  <Card title="Guide d'ing√©nierie des prompts" icon="book" href="/fr/build/conversation/prompt-engineering-guide">
    Voyez les variables en action avec des exemples complets
  </Card>
  <Card title="Testez votre agent" icon="vial" href="/fr/test/web-simulator">
    Testez que vos variables fonctionnent correctement
  </Card>
</CardGroup>
