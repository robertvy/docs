---
title: "Vari√°veis e conte√∫do din√¢mico"
description: "Use templates Jinja para personalizar instru√ß√µes e sauda√ß√µes do agente"
icon: "brackets-curly"
"keywords": "Vari√°veis de template IA, templates Jinja, conte√∫do din√¢mico, conversas IA personalizadas, sintaxe de template, l√≥gica condicional, personaliza√ß√£o IA"
"og:description": "Domine vari√°veis de template Jinja para criar conversas de agente IA din√¢micas e personalizadas com l√≥gica condicional e dados personalizados."
---

## Vis√£o geral

Vari√°veis permitem que voc√™ personalize as instru√ß√µes do seu agente com dados din√¢micos. itellicoAI usa [templates Jinja2](https://jinja.palletsprojects.com/en/stable/).

---

## Como as vari√°veis funcionam

### Vari√°veis de contato integradas

Se um contato existe em sua conta itellicoAI, estes 5 campos est√£o automaticamente dispon√≠veis:

```jinja wrap
{{ contact.first_name }}
{{ contact.last_name }}
{{ contact.full_name }}
{{ contact.email }}
{{ contact.phone }}
```

**Exemplo:**
```jinja wrap
Ol√° {{ contact.first_name }}!
Seu e-mail √© {{ contact.email }}.
```

‚úÖ Nenhuma configura√ß√£o necess√°ria - funciona automaticamente se o contato existe

---

### Todo o resto: API de contexto din√¢mico

**Todos os outros dados** devem vir do seu [endpoint API de contexto din√¢mico](/pt/build/advanced/dynamic-context) como **vari√°veis de n√≠vel superior**.

Voc√™ pode retornar quaisquer campos que desejar. Por exemplo:

```jinja wrap
{{ language }}
{{ account_tier }}
{{ company_name }}
{{ order_id }}
{{ customer_since }}
{{ any_field_you_need }}
```

**Exemplo - Sua API retorna:**
```json
{
  "language": "pt",
  "account_tier": "premium",
  "company_name": "Acme Corp"
}
```

**Ent√£o seu agente pode usar:**
```jinja wrap
{% if language == "pt" %}
Ol√°! Voc√™ trabalha para {{ company_name }}.
{% endif %}

{% if account_tier == "premium" %}
Suporte priorit√°rio dispon√≠vel.
{% endif %}
```

‚öôÔ∏è Requer configura√ß√£o - veja [API de contexto din√¢mico](/pt/build/advanced/dynamic-context)

---

## Vari√°veis dispon√≠veis

### Vari√°veis de contato integradas

Estas vari√°veis est√£o automaticamente dispon√≠veis de seus contatos itellicoAI:

```jinja wrap
{{ contact.first_name }}
{{ contact.last_name }}
{{ contact.full_name }}
{{ contact.email }}
{{ contact.phone }}
```

**Exemplo de uso:**

```text wrap
Voc√™ est√° falando com {{ contact.first_name }} {{ contact.last_name }}.
O e-mail dele √© {{ contact.email | default("n√£o fornecido") }}.
O n√∫mero de telefone dele √© {{ contact.phone }}.

```

<Note>
**Campos personalizados** N√ÉO est√£o aninhados sob `contact.` ‚Äî eles s√£o vari√°veis de n√≠vel superior como `{{ language }}` ou `{{ account_tier }}`. Voc√™ deve fornec√™-los atrav√©s da sua [API de contexto din√¢mico](/pt/build/advanced/dynamic-context).
</Note>

### Vari√°veis de contexto din√¢mico

Quaisquer dados personalizados que voc√™ forne√ßa atrav√©s do seu endpoint API de contexto din√¢mico se tornam dispon√≠veis como vari√°veis de **n√≠vel superior**:

```jinja wrap
{{ account_tier }}
{{ language }}
{{ company_name }}
{{ preferred_contact_method }}
```

**Exemplo com vari√°veis personalizadas:**

```jinja wrap
{% if account_tier == "premium" %}
Como cliente premium, voc√™ tem suporte priorit√°rio.
{% endif %}

{% if language == "pt" %}
Fale portugu√™s.
{% endif %}

Empresa: {{ company_name | default("cliente valorizado") }}

```

<Tip>
Configure um endpoint API de contexto din√¢mico para fornecer vari√°veis personalizadas. Quaisquer campos JSON que voc√™ retornar se tornam vari√°veis de n√≠vel superior (ex., `{"language": "pt"}` ‚Üí `{{ language }}`).
</Tip>

### Data e hora

A data e hora atuais est√£o automaticamente dispon√≠veis como `current_datetime` tanto em **sauda√ß√µes quanto instru√ß√µes**:

```jinja wrap
{{ current_datetime }}                      # Timestamp atual
{{ current_datetime.hour }}                 # Hora atual (0-23)
{{ current_datetime | datetime("%H:%M") }}  # Formato com filtro datetime
{{ current_datetime | datetime("%A") }}     # Nome do dia (Segunda, Ter√ßa, etc.)
```

**Exemplo de uso:**

```jinja wrap
{% if current_datetime.hour < 12 %}
Bom dia, {{ contact.first_name }}!
{% elif current_datetime.hour < 17 %}
Boa tarde, {{ contact.first_name }}!
{% else %}
Boa noite, {{ contact.first_name }}!
{% endif %}
```

<Tip>
Use `current_datetime` para construir l√≥gica avan√ßada baseada em tempo como roteamento de hor√°rio comercial, sauda√ß√µes baseadas em hora do dia ou restri√ß√µes de agendamento sem precisar de fontes de dados externas.
</Tip>

<Note>
Use o filtro `datetime` para formata√ß√£o. O m√©todo `.strftime()` n√£o est√° dispon√≠vel por restri√ß√µes de seguran√ßa.
</Note>

---

## L√≥gica condicional

### Instru√ß√£o If

```jinja wrap
{% if condition %}
  Isto √© mostrado se a condi√ß√£o for verdadeira
{% endif %}
```

### If-Else

```jinja wrap
{% if account_tier == "VIP" %}
  Fornecer servi√ßo VIP
{% else %}
  Fornecer servi√ßo padr√£o
{% endif %}
```

### If-Elif-Else

```jinja wrap
{% if account_value > 10000 %}
  Cliente n√≠vel Enterprise
{% elif account_value > 1000 %}
  Cliente n√≠vel Professional
{% else %}
  Cliente n√≠vel Padr√£o
{% endif %}
```

### Exemplo do mundo real

```jinja wrap
{% if language == "es" %}
Responda em espanhol. Use tratamento formal (usted).
{% elif language == "fr" %}
Responda em franc√™s. Use tratamento formal (vous).
{% elif language == "de" %}
Responda em alem√£o. Use tratamento formal (Sie).
{% else %}
Responda em ingl√™s. Use tom amig√°vel e conversacional.
{% endif %}
```

---

## Filtros

Filtros transformam valores de vari√°veis.

### Filtros comuns

**default:** Fornecer valor de fallback

```jinja wrap
{{ contact.first_name | default("") }}
```

**upper:** Converter para mai√∫sculas

```jinja wrap
{{ contact.last_name | upper }}
```

**lower:** Converter para min√∫sculas

```jinja wrap
{{ contact.email | lower }}
```

**title:** Primeira letra mai√∫scula

```jinja wrap
{{ contact.first_name | title }}
```

**length:** Obter comprimento

```jinja wrap
{% if contact.phone | length > 10 %}
  N√∫mero internacional detectado
{% endif %}
```

**datetime:** Formatar objetos datetime

```jinja wrap
{{ current_datetime | datetime("%H:%M") }}         # 14:30
{{ current_datetime | datetime("%d.%m.%Y") }}      # 24.01.2025
{{ current_datetime | datetime("%A, %B %d") }}     # Segunda, 24 de janeiro
```

### Encadeamento de filtros

```jinja wrap
{{ contact.first_name | default("Amigo") | title }}
```

---

## Loops

Iterar sobre listas (caso de uso avan√ßado):

```jinja wrap
{% for item in list_variable %}
  Processar {{ item }}
{% endfor %}
```

---

## Exemplos pr√°ticos

### Exemplo 1: Sauda√ß√£o personalizada

```jinja wrap
{% if contact.first_name %}
Ol√° {{ contact.first_name }}, √© √≥timo ouvir de voc√™!
{% else %}
Ol√°! Obrigado por ligar!
{% endif %}

{% if contact.email %}
Tenho suas informa√ß√µes de contato em arquivo, ent√£o posso enviar uma confirma√ß√£o ap√≥s nossa chamada.
{% endif %}
```

### Exemplo 2: L√≥gica de neg√≥cio personalizada (Requer API de contexto din√¢mico)

```jinja wrap
{% if contact.first_name %}
Ol√° {{ contact.first_name }}, obrigado por ligar para {{ company_name }}!
{% else %}
Ol√°! Obrigado por ligar para {{ company_name }}!
{% endif %}

{% if account_tier == "premium" %}
Como cliente premium, voc√™ tem suporte priorit√°rio. Como posso ajud√°-lo hoje?
{% else %}
Como posso ajud√°-lo hoje?
{% endif %}
```

<Note>
Vari√°veis como `company_name` e `account_tier` devem ser fornecidas pelo seu endpoint API de contexto din√¢mico.
</Note>

### Exemplo 3: Instru√ß√µes baseadas em tempo

```jinja wrap
Hora atual: {{ current_datetime | datetime("%H:%M") }}

{% if current_datetime.hour >= 17 or current_datetime.hour < 9 %}
Fora do hor√°rio comercial normal. Se o cliente precisa de assist√™ncia imediata:
"Nosso hor√°rio de suporte regular √© das 9h √†s 17h. Para problemas urgentes, posso pegar suas informa√ß√µes e algu√©m ligar√° de manh√£ cedo, ou voc√™ pode ligar para nossa linha de emerg√™ncia no [n√∫mero]."
{% else %}
Dentro do hor√°rio comercial. Suporte completo dispon√≠vel.
{% endif %}
```

### Exemplo 4: Suporte multil√≠ngue (Requer API de contexto din√¢mico)

```jinja wrap
Idioma preferido do cliente: {{ language | default("pt") }}

{% if language == "es" %}
Idioma: Espanhol
Sauda√ß√£o: "¬°Hola!"
Tom: Formal (use "usted")
Cole√ß√£o de conhecimento: "FAQ Espa√±ol"
{% elif language == "de" %}
Idioma: Alem√£o
Sauda√ß√£o: "Guten Tag!"
Tom: Formal (use "Sie")
Cole√ß√£o de conhecimento: "FAQ Deutsch"
{% else %}
Idioma: Portugu√™s
Sauda√ß√£o: "Ol√°!"
Tom: Amig√°vel e conversacional
Cole√ß√£o de conhecimento: "FAQ Portugu√™s"
{% endif %}
```

### Exemplo 5: L√≥gica de n√≠vel de conta

```jinja wrap
Valor da conta: R${{ account_value | default(0) }}

{% if account_value >= 50000 %}
üåü CLIENTE ENTERPRISE
- Oferecer servi√ßo white-glove
- Acesso direto ao gerente de conta
- Tempos de resposta priorit√°rios
- Solu√ß√µes personalizadas dispon√≠veis
{% elif account_value >= 10000 %}
üíº CLIENTE PROFESSIONAL
- N√≠vel de suporte premium
- Equipe de suporte dedicada
- Fila priorit√°ria
{% else %}
üë§ CLIENTE PADR√ÉO
- Suporte padr√£o
- Base de conhecimento primeiro
- Transferir para problemas complexos
{% endif %}
```

---

## Testando vari√°veis

### Testar com dados diferentes

1. V√° para **Chamada de teste**
2. Teste cen√°rios com dados de contato diferentes:
   - Com nome vs sem nome
   - Cliente VIP vs cliente padr√£o
   - Idiomas diferentes
   - Fusos hor√°rios diferentes

### Problemas comuns

| Problema | Causa | Solu√ß√£o |
|----------|-------|---------|
| Vari√°vel aparece em branco | Nenhum valor padr√£o fornecido | Adicione `\| default("fallback")` |
| Erro de sintaxe | Erro de digita√ß√£o no nome da vari√°vel | Verifique ortografia contra vari√°veis dispon√≠veis |
| Condi√ß√£o n√£o funciona | Operador de compara√ß√£o errado | Use `==` n√£o `=` |
| Filtro n√£o se aplica | Filtro n√£o existe | Verifique ortografia do nome do filtro |

---

## Melhores pr√°ticas

<AccordionGroup>
  <Accordion title="Sempre use padr√µes" icon="shield">
    Nunca assuma que uma vari√°vel tem um valor. Sempre forne√ßa padr√µes.

    ‚ùå **Ruim:**
    ```jinja
    Ol√° {{ contact.first_name }}!
    ```

    ‚úÖ **Bom:**
    ```jinja
    Ol√° {{ contact.first_name | default("") }}!
    ```
  </Accordion>

  <Accordion title="Mantenha a l√≥gica simples" icon="lightbulb">
    Condi√ß√µes aninhadas complexas s√£o dif√≠ceis de depurar. Mantenha simples.

    ‚ùå **Muito complexo:**
    ```jinja
    {% if account_tier == "VIP" and account_value > 10000 and region == "BR" %}
    ```

    ‚úÖ **Mais simples:**
    ```jinja
    {% if account_tier == "VIP" %}
    ```
  </Accordion>

  <Accordion title="Teste casos extremos" icon="vial">
    Teste com:
    - Dados ausentes (todos os campos vazios)
    - Valores inesperados
    - Strings muito longas
    - Caracteres especiais
  </Accordion>
</AccordionGroup>

---

## Pr√≥ximos passos

<CardGroup cols={2}>
  <Card title="Guia de engenharia de prompts" icon="book" href="/pt/build/conversation/prompt-engineering-guide">
    Veja vari√°veis em a√ß√£o com exemplos completos
  </Card>
  <Card title="Teste seu agente" icon="vial" href="/pt/test/web-simulator">
    Teste que suas vari√°veis funcionam corretamente
  </Card>
</CardGroup>
