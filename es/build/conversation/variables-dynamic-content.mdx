---
title: "Variables y contenido din√°mico"
description: "Usa plantillas Jinja para personalizar instrucciones y saludos del agente"
icon: "brackets-curly"
"keywords": "Variables de plantilla de IA, plantillas Jinja, contenido din√°mico, conversaciones de IA personalizadas, sintaxis de plantilla, l√≥gica condicional, personalizaci√≥n de IA"
"og:description": "Domina las variables de plantilla Jinja para crear conversaciones de agente de IA din√°micas y personalizadas con l√≥gica condicional y datos personalizados."
---

## Descripci√≥n general

Las variables te permiten personalizar las instrucciones de tu agente con datos din√°micos. itellicoAI usa [plantillas Jinja2](https://jinja.palletsprojects.com/en/stable/).

---

## C√≥mo funcionan las variables

### Variables de contacto integradas

Si un contacto existe en tu cuenta de itellicoAI, estos 5 campos est√°n disponibles autom√°ticamente:

```jinja wrap
{{ contact.first_name }}
{{ contact.last_name }}
{{ contact.full_name }}
{{ contact.email }}
{{ contact.phone }}
```

**Ejemplo:**
```jinja wrap
Hola {{ contact.first_name }}!
Tu correo es {{ contact.email }}.
```

‚úÖ No se necesita configuraci√≥n - funciona autom√°ticamente si el contacto existe

---

### Todo lo dem√°s: API de contexto din√°mico

**Todos los dem√°s datos** deben provenir de tu [punto de acceso API de contexto din√°mico](/es/build/advanced/dynamic-context) como **variables de nivel superior**.

Puedes devolver cualquier campo que desees. Por ejemplo:

```jinja wrap
{{ language }}
{{ account_tier }}
{{ company_name }}
{{ order_id }}
{{ customer_since }}
{{ any_field_you_need }}
```

**Ejemplo - Tu API devuelve:**
```json
{
  "language": "es",
  "account_tier": "premium",
  "company_name": "Acme Corp"
}
```

**Entonces tu agente puede usar:**
```jinja wrap
{% if language == "es" %}
¬°Hola! Trabajas para {{ company_name }}.
{% endif %}

{% if account_tier == "premium" %}
Soporte prioritario disponible.
{% endif %}
```

‚öôÔ∏è Requiere configuraci√≥n - consulta [API de contexto din√°mico](/es/build/advanced/dynamic-context)

---

## Variables disponibles

### Variables de contacto integradas

Estas variables est√°n disponibles autom√°ticamente desde tus contactos de itellicoAI:

```jinja wrap
{{ contact.first_name }}
{{ contact.last_name }}
{{ contact.full_name }}
{{ contact.email }}
{{ contact.phone }}
```

**Ejemplo de uso:**

```text wrap
Est√°s hablando con {{ contact.first_name }} {{ contact.last_name }}.
Su correo es {{ contact.email | default("no proporcionado") }}.
Su n√∫mero de tel√©fono es {{ contact.phone }}.

```

<Note>
**Los campos personalizados** NO est√°n anidados bajo `contact.` ‚Äî son variables de nivel superior como `{{ language }}` o `{{ account_tier }}`. Debes proporcionarlos a trav√©s de tu [API de contexto din√°mico](/es/build/advanced/dynamic-context).
</Note>

### Variables de contexto din√°mico

Cualquier dato personalizado que proporciones a trav√©s de tu punto de acceso API de contexto din√°mico se vuelve disponible como variables de **nivel superior**:

```jinja wrap
{{ account_tier }}
{{ language }}
{{ company_name }}
{{ preferred_contact_method }}
```

**Ejemplo con variables personalizadas:**

```jinja wrap
{% if account_tier == "premium" %}
Como cliente premium, tienes soporte prioritario.
{% endif %}

{% if language == "es" %}
Habla espa√±ol.
{% endif %}

Empresa: {{ company_name | default("cliente valorado") }}

```

<Tip>
Configura un punto de acceso API de contexto din√°mico para proporcionar variables personalizadas. Cualquier campo JSON que devuelvas se convierte en variables de nivel superior (ej., `{"language": "es"}` ‚Üí `{{ language }}`).
</Tip>

### Fecha y hora

La fecha y hora actuales est√°n disponibles autom√°ticamente como `current_datetime` en **saludos e instrucciones**:

```jinja wrap
{{ current_datetime }}                      # Marca de tiempo actual
{{ current_datetime.hour }}                 # Hora actual (0-23)
{{ current_datetime | datetime("%H:%M") }}  # Formato con filtro datetime
{{ current_datetime | datetime("%A") }}     # Nombre del d√≠a (Lunes, Martes, etc.)
```

**Ejemplo de uso:**

```jinja wrap
{% if current_datetime.hour < 12 %}
Buenos d√≠as, {{ contact.first_name }}!
{% elif current_datetime.hour < 17 %}
Buenas tardes, {{ contact.first_name }}!
{% else %}
Buenas noches, {{ contact.first_name }}!
{% endif %}
```

<Tip>
Usa `current_datetime` para construir l√≥gica avanzada basada en tiempo como enrutamiento de horario comercial, saludos por hora del d√≠a o restricciones de programaci√≥n sin necesidad de fuentes de datos externas.
</Tip>

<Note>
Usa el filtro `datetime` para formateo. El m√©todo `.strftime()` no est√° disponible por restricciones de seguridad.
</Note>

---

## L√≥gica condicional

### Declaraci√≥n If

```jinja wrap
{% if condition %}
  Esto se muestra si la condici√≥n es verdadera
{% endif %}
```

### If-Else

```jinja wrap
{% if account_tier == "VIP" %}
  Proporcionar servicio VIP
{% else %}
  Proporcionar servicio est√°ndar
{% endif %}
```

### If-Elif-Else

```jinja wrap
{% if account_value > 10000 %}
  Cliente de nivel Empresarial
{% elif account_value > 1000 %}
  Cliente de nivel Profesional
{% else %}
  Cliente de nivel Est√°ndar
{% endif %}
```

### Ejemplo del mundo real

```jinja wrap
{% if language == "es" %}
Responde en espa√±ol. Usa tratamiento formal (usted).
{% elif language == "fr" %}
Responde en franc√©s. Usa tratamiento formal (vous).
{% elif language == "de" %}
Responde en alem√°n. Usa tratamiento formal (Sie).
{% else %}
Responde en ingl√©s. Usa tono amigable y conversacional.
{% endif %}
```

---

## Filtros

Los filtros transforman valores de variables.

### Filtros comunes

**default:** Proporcionar valor de respaldo

```jinja wrap
{{ contact.first_name | default("") }}
```

**upper:** Convertir a may√∫sculas

```jinja wrap
{{ contact.last_name | upper }}
```

**lower:** Convertir a min√∫sculas

```jinja wrap
{{ contact.email | lower }}
```

**title:** May√∫scula inicial

```jinja wrap
{{ contact.first_name | title }}
```

**length:** Obtener longitud

```jinja wrap
{% if contact.phone | length > 10 %}
  N√∫mero internacional detectado
{% endif %}
```

**datetime:** Formatear objetos datetime

```jinja wrap
{{ current_datetime | datetime("%H:%M") }}         # 14:30
{{ current_datetime | datetime("%d.%m.%Y") }}      # 24.01.2025
{{ current_datetime | datetime("%A, %B %d") }}     # Lunes, 24 de enero
```

### Encadenamiento de filtros

```jinja wrap
{{ contact.first_name | default("Amigo") | title }}
```

---

## Bucles

Iterar sobre listas (caso de uso avanzado):

```jinja wrap
{% for item in list_variable %}
  Procesar {{ item }}
{% endfor %}
```

---

## Ejemplos pr√°cticos

### Ejemplo 1: Saludo personalizado

```jinja wrap
{% if contact.first_name %}
Hola {{ contact.first_name }}, ¬°es genial escucharte!
{% else %}
¬°Hola! ¬°Gracias por llamar!
{% endif %}

{% if contact.email %}
Tengo tu informaci√≥n de contacto en archivo, as√≠ que puedo enviarte una confirmaci√≥n despu√©s de nuestra llamada.
{% endif %}
```

### Ejemplo 2: L√≥gica empresarial personalizada (Requiere API de contexto din√°mico)

```jinja wrap
{% if contact.first_name %}
Hola {{ contact.first_name }}, ¬°gracias por llamar a {{ company_name }}!
{% else %}
¬°Hola! ¬°Gracias por llamar a {{ company_name }}!
{% endif %}

{% if account_tier == "premium" %}
Como cliente premium, tienes soporte prioritario. ¬øEn qu√© puedo ayudarte hoy?
{% else %}
¬øEn qu√© puedo ayudarte hoy?
{% endif %}
```

<Note>
Variables como `company_name` y `account_tier` deben ser proporcionadas por tu punto de acceso API de contexto din√°mico.
</Note>

### Ejemplo 3: Instrucciones basadas en tiempo

```jinja wrap
Hora actual: {{ current_datetime | datetime("%H:%M") }}

{% if current_datetime.hour >= 17 or current_datetime.hour < 9 %}
Fuera del horario comercial normal. Si el cliente necesita asistencia inmediata:
"Nuestro horario de soporte regular es de 9 AM a 5 PM. Para problemas urgentes, puedo tomar tu informaci√≥n y alguien te llamar√° a primera hora de la ma√±ana, o puedes llamar a nuestra l√≠nea de emergencia al [n√∫mero]."
{% else %}
Dentro del horario comercial. Soporte completo disponible.
{% endif %}
```

### Ejemplo 4: Soporte multiling√ºe (Requiere API de contexto din√°mico)

```jinja wrap
Idioma preferido del cliente: {{ language | default("es") }}

{% if language == "es" %}
Idioma: Espa√±ol
Saludo: "¬°Hola!"
Tono: Formal (usa "usted")
Colecci√≥n de conocimientos: "FAQ Espa√±ol"
{% elif language == "de" %}
Idioma: Alem√°n
Saludo: "Guten Tag!"
Tono: Formal (usa "Sie")
Colecci√≥n de conocimientos: "FAQ Deutsch"
{% else %}
Idioma: Ingl√©s
Saludo: "Hello!"
Tono: Amigable y conversacional
Colecci√≥n de conocimientos: "FAQ English"
{% endif %}
```

### Ejemplo 5: L√≥gica de nivel de cuenta

```jinja wrap
Valor de cuenta: ${{ account_value | default(0) }}

{% if account_value >= 50000 %}
üåü CLIENTE EMPRESARIAL
- Ofrecer servicio white-glove
- Acceso directo al gerente de cuenta
- Tiempos de respuesta prioritarios
- Soluciones personalizadas disponibles
{% elif account_value >= 10000 %}
üíº CLIENTE PROFESIONAL
- Nivel de soporte premium
- Equipo de soporte dedicado
- Cola prioritaria
{% else %}
üë§ CLIENTE EST√ÅNDAR
- Soporte est√°ndar
- Base de conocimientos primero
- Transferir para problemas complejos
{% endif %}
```

---

## Probar variables

### Probar con diferentes datos

1. Ve a **Llamada de prueba**
2. Prueba escenarios con diferentes datos de contacto:
   - Con nombre vs sin nombre
   - Cliente VIP vs cliente est√°ndar
   - Diferentes idiomas
   - Diferentes zonas horarias

### Problemas comunes

| Problema | Causa | Soluci√≥n |
|----------|-------|----------|
| La variable se muestra en blanco | No se proporcion√≥ valor predeterminado | Agrega `\| default("respaldo")` |
| Error de sintaxis | Error tipogr√°fico en nombre de variable | Verifica ortograf√≠a contra variables disponibles |
| La condici√≥n no funciona | Operador de comparaci√≥n incorrecto | Usa `==` no `=` |
| El filtro no se aplica | El filtro no existe | Verifica ortograf√≠a del nombre del filtro |

---

## Mejores pr√°cticas

<AccordionGroup>
  <Accordion title="Siempre usa valores predeterminados" icon="shield">
    Nunca asumas que una variable tiene un valor. Siempre proporciona valores predeterminados.

    ‚ùå **Malo:**
    ```jinja
    Hola {{ contact.first_name }}!
    ```

    ‚úÖ **Bueno:**
    ```jinja
    Hola {{ contact.first_name | default("") }}!
    ```
  </Accordion>

  <Accordion title="Mant√©n la l√≥gica simple" icon="lightbulb">
    Las condiciones anidadas complejas son dif√≠ciles de depurar. Mantenlo simple.

    ‚ùå **Demasiado complejo:**
    ```jinja
    {% if account_tier == "VIP" and account_value > 10000 and region == "US" %}
    ```

    ‚úÖ **M√°s simple:**
    ```jinja
    {% if account_tier == "VIP" %}
    ```
  </Accordion>

  <Accordion title="Prueba casos extremos" icon="vial">
    Prueba con:
    - Datos faltantes (todos los campos vac√≠os)
    - Valores inesperados
    - Cadenas muy largas
    - Caracteres especiales
  </Accordion>
</AccordionGroup>

---

## Pr√≥ximos pasos

<CardGroup cols={2}>
  <Card title="Gu√≠a de ingenier√≠a de prompts" icon="book" href="/es/build/conversation/prompt-engineering-guide">
    Ve las variables en acci√≥n con ejemplos completos
  </Card>
  <Card title="Prueba tu agente" icon="vial" href="/es/test/web-simulator">
    Prueba que tus variables funcionen correctamente
  </Card>
</CardGroup>
