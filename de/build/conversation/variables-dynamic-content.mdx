---
title: "Variablen & Dynamischer Inhalt"
description: "Verwende Jinja-Templating, um Agentenanweisungen und Begr√º√üungen zu personalisieren"
icon: "brackets-curly"
keywords: "Jinja-Template, Variablen, dynamischer Inhalt, Personalisierung, Template-Engine, Kontaktvariablen, dynamische Antworten, Jinja2"
og:description: "Personalisiere Agent-Gespr√§che mit Jinja-Templating. Nutze Variablen und dynamische Inhalte f√ºr individuelle Kundeninteraktionen."
---

## √úberblick

Variablen erm√∂glichen es dir, die Anweisungen deines Agenten mit dynamischen Daten zu personalisieren. itellicoAI verwendet [Jinja2-Templating](https://jinja.palletsprojects.com/en/stable/).

---

## Wie Variablen funktionieren

### Integrierte Kontaktvariablen

Wenn ein Kontakt in deinem itellicoAI-Konto existiert, sind diese 5 Felder automatisch verf√ºgbar:

```jinja wrap
{{ contact.first_name }}
{{ contact.last_name }}
{{ contact.full_name }}
{{ contact.email }}
{{ contact.phone }}
```

**Beispiel:**
```jinja wrap
Hallo {{ contact.first_name }}!
Ihre E-Mail ist {{ contact.email }}.
```

‚úÖ Keine Einrichtung erforderlich - funktioniert automatisch, wenn ein Kontakt existiert

---

### Alles Andere: Dynamic Context API

**Alle anderen Daten** m√ºssen von deinem [Dynamic Context API-Endpunkt](/de/build/advanced/dynamic-context) als **Top-Level-Variablen** stammen.

Du kannst beliebige Felder zur√ºckgeben. Zum Beispiel:

```jinja wrap
{{ language }}
{{ account_tier }}
{{ company_name }}
{{ order_id }}
{{ customer_since }}
{{ any_field_you_need }}
```

**Beispiel - deine API gibt zur√ºck:**
```json
{
  "language": "de",
  "account_tier": "premium",
  "company_name": "Acme Corp"
}
```

**Dann kann dein Agent verwenden:**
```jinja wrap
{% if language == "de" %}
Guten Tag! Sie arbeiten f√ºr {{ company_name }}.
{% endif %}

{% if account_tier == "premium" %}
Priorit√§tssupport verf√ºgbar.
{% endif %}
```

‚öôÔ∏è Erfordert Einrichtung - siehe [Dynamic Context API](/de/build/advanced/dynamic-context)

---

## Verf√ºgbare Variablen

### Integrierte Kontaktvariablen

Diese Variablen sind automatisch von deinen itellicoAI-Kontakten verf√ºgbar:

```jinja wrap
{{ contact.first_name }}
{{ contact.last_name }}
{{ contact.full_name }}
{{ contact.email }}
{{ contact.phone }}
```

**Beispielverwendung:**

```text wrap
Sie sprechen mit {{ contact.first_name }} {{ contact.last_name }}.
Ihre E-Mail ist {{ contact.email | default("nicht angegeben") }}.
Ihre Telefonnummer ist {{ contact.phone }}.

```

<Note>
**Benutzerdefinierte Felder** sind NICHT unter `contact.` verschachtelt ‚Äî sie sind Top-Level-Variablen wie `{{ language }}` oder `{{ account_tier }}`. Du musst diese √ºber deine [Dynamic Context API](/de/build/advanced/dynamic-context) bereitstellen.
</Note>

### Dynamic Context Variablen

Alle benutzerdefinierten Daten, die du √ºber deinen Dynamic Context API-Endpunkt bereitstellst, werden als **Top-Level**-Variablen verf√ºgbar:

```jinja wrap
{{ account_tier }}
{{ language }}
{{ company_name }}
{{ preferred_contact_method }}
```

**Beispiel mit benutzerdefinierten Variablen:**

```jinja wrap
{% if account_tier == "premium" %}
Als Premium-Kunde haben Sie Priorit√§tssupport.
{% endif %}

{% if language == "de" %}
Sprechen Sie Deutsch.
{% endif %}

Unternehmen: {{ company_name | default("gesch√§tzter Kunde") }}

```

<Tip>
Richte einen Dynamic Context API-Endpunkt ein, um benutzerdefinierte Variablen bereitzustellen. Alle JSON-Felder, die du zur√ºckgibst, werden zu Top-Level-Variablen (z.B. `{"language": "de"}` ‚Üí `{{ language }}`).
</Tip>

### Datum & Uhrzeit

Die aktuelle Datumzeit ist automatisch als `current_datetime` sowohl in **Begr√º√üungen als auch in Anweisungen** verf√ºgbar:

```jinja wrap
{{ current_datetime }}                      # Aktueller Zeitstempel
{{ current_datetime.hour }}                 # Aktuelle Stunde (0-23)
{{ current_datetime | datetime("%H:%M") }}  # Formatieren mit datetime-Filter
{{ current_datetime | datetime("%A") }}     # Tagesname (Montag, Dienstag, etc.)
```

**Beispielverwendung:**

```jinja wrap
{% if current_datetime.hour < 12 %}
Guten Morgen, {{ contact.first_name }}!
{% elif current_datetime.hour < 17 %}
Guten Tag, {{ contact.first_name }}!
{% else %}
Guten Abend, {{ contact.first_name }}!
{% endif %}
```

<Tip>
Verwende `current_datetime`, um erweiterte zeitbasierte Logik wie Gesch√§ftszeitenrouting, Tageszeit-Begr√º√üungen oder Planungsbeschr√§nkungen zu erstellen, ohne externe Datenquellen zu ben√∂tigen.
</Tip>

<Note>
Verwende den `datetime`-Filter zum Formatieren. Die Methode `.strftime()` ist aus Sicherheitsgr√ºnden nicht verf√ºgbar.
</Note>

---

## Bedingte Logik

### If-Anweisung

```jinja wrap
{% if condition %}
  Dies wird angezeigt, wenn die Bedingung wahr ist
{% endif %}
```

### If-Else

```jinja wrap
{% if account_tier == "VIP" %}
  VIP-Service bereitstellen
{% else %}
  Standard-Service bereitstellen
{% endif %}
```

### If-Elif-Else

```jinja wrap
{% if account_value > 10000 %}
  Enterprise-Tier-Kunde
{% elif account_value > 1000 %}
  Professional-Tier-Kunde
{% else %}
  Standard-Tier-Kunde
{% endif %}
```

### Praxisbeispiel

```jinja wrap
{% if language == "es" %}
Antworten Sie auf Spanisch. Verwenden Sie formelle Anrede (usted).
{% elif language == "fr" %}
Antworten Sie auf Franz√∂sisch. Verwenden Sie formelle Anrede (vous).
{% elif language == "de" %}
Antworten Sie auf Deutsch. Verwenden Sie formelle Anrede (Sie).
{% else %}
Antworten Sie auf Englisch. Verwenden Sie einen freundlichen, umgangssprachlichen Ton.
{% endif %}
```

---

## Filter

Filter transformieren Variablenwerte.

### H√§ufige Filter

**default:** Fallback-Wert bereitstellen

```jinja wrap
{{ contact.first_name | default("") }}
```

**upper:** In Gro√übuchstaben umwandeln

```jinja wrap
{{ contact.last_name | upper }}
```

**lower:** In Kleinbuchstaben umwandeln

```jinja wrap
{{ contact.email | lower }}
```

**title:** Titelschreibweise

```jinja wrap
{{ contact.first_name | title }}
```

**length:** L√§nge erhalten

```jinja wrap
{% if contact.phone | length > 10 %}
  Internationale Nummer erkannt
{% endif %}
```

**datetime:** Datetime-Objekte formatieren

```jinja wrap
{{ current_datetime | datetime("%H:%M") }}         # 14:30
{{ current_datetime | datetime("%d.%m.%Y") }}      # 24.01.2025
{{ current_datetime | datetime("%A, %B %d") }}     # Montag, 24. Januar
```

### Filter verketten

```jinja wrap
{{ contact.first_name | default("Freund") | title }}
```

---

## Schleifen

√úber Listen iterieren (fortgeschrittener Anwendungsfall):

```jinja wrap
{% for item in list_variable %}
  Verarbeite {{ item }}
{% endfor %}
```

---

## Praktische Beispiele

### Beispiel 1: Personalisierte Begr√º√üung

```jinja wrap
{% if contact.first_name %}
Hallo {{ contact.first_name }}, sch√∂n von Ihnen zu h√∂ren!
{% else %}
Hallo! Danke f√ºr Ihren Anruf!
{% endif %}

{% if contact.email %}
Ich habe Ihre Kontaktinformationen hinterlegt, sodass ich Ihnen nach unserem Gespr√§ch eine Best√§tigung senden kann.
{% endif %}
```

### Beispiel 2: Benutzerdefinierte Gesch√§ftslogik (Erfordert Dynamic Context API)

```jinja wrap
{% if contact.first_name %}
Hallo {{ contact.first_name }}, danke f√ºr Ihren Anruf bei {{ company_name }}!
{% else %}
Hallo! Danke f√ºr Ihren Anruf bei {{ company_name }}!
{% endif %}

{% if account_tier == "premium" %}
Als Premium-Kunde haben Sie Priorit√§tssupport. Wie kann ich Ihnen heute helfen?
{% else %}
Wie kann ich Ihnen heute helfen?
{% endif %}
```

<Note>
Variablen wie `company_name` und `account_tier` m√ºssen von deinem Dynamic Context API-Endpunkt bereitgestellt werden.
</Note>

### Beispiel 3: Zeitbasierte Anweisungen

```jinja wrap
Aktuelle Zeit: {{ current_datetime | datetime("%H:%M") }}

{% if current_datetime.hour >= 17 or current_datetime.hour < 9 %}
Au√üerhalb der normalen Gesch√§ftszeiten. Wenn der Kunde sofortige Hilfe ben√∂tigt:
"Unsere regul√§ren Support-Zeiten sind von 9 bis 17 Uhr. Bei dringenden Problemen kann ich Ihre Informationen aufnehmen und jemand wird Sie morgen fr√ºh als Erstes anrufen, oder Sie erreichen unsere Notfallhotline unter [Nummer]."
{% else %}
Innerhalb der Gesch√§ftszeiten. Vollst√§ndiger Support verf√ºgbar.
{% endif %}
```

### Beispiel 4: Mehrsprachiger Support (Erfordert Dynamic Context API)

```jinja wrap
Bevorzugte Sprache des Kunden: {{ language | default("en") }}

{% if language == "es" %}
Sprache: Spanisch
Begr√º√üung: "¬°Hola!"
Ton: Formell (verwenden Sie "usted")
Wissenssammlung: "FAQ Espa√±ol"
{% elif language == "de" %}
Sprache: Deutsch
Begr√º√üung: "Guten Tag!"
Ton: Formell (verwenden Sie "Sie")
Wissenssammlung: "FAQ Deutsch"
{% else %}
Sprache: Englisch
Begr√º√üung: "Hello!"
Ton: Freundlich und umgangssprachlich
Wissenssammlung: "FAQ English"
{% endif %}
```

### Beispiel 5: Account-Tier-Logik

```jinja wrap
Kontowert: ${{ account_value | default(0) }}

{% if account_value >= 50000 %}
üåü ENTERPRISE-KUNDE
- Bieten Sie White-Glove-Service an
- Direkter Zugang zum Account-Manager
- Priorit√§ts-Antwortzeiten
- Ma√ügeschneiderte L√∂sungen verf√ºgbar
{% elif account_value >= 10000 %}
üíº PROFESSIONAL-KUNDE
- Premium-Support-Stufe
- Dediziertes Support-Team
- Priorit√§tswarteschlange
{% else %}
üë§ STANDARD-KUNDE
- Standard-Support
- Zuerst Wissensdatenbank
- Weiterleitung bei komplexen Problemen
{% endif %}
```

---

## Variablen testen

### Mit verschiedenen Daten testen

1. Gehe zu **Testanruf**
2. Teste Szenarien mit verschiedenen Kontaktdaten:
   - Mit Vornamen vs. ohne
   - VIP vs. Standard-Kunde
   - Verschiedene Sprachen
   - Verschiedene Zeitzone

### H√§ufige Probleme

| Problem | Ursache | L√∂sung |
|-------|-------|-----|
| Variable wird leer angezeigt | Kein Standardwert angegeben | F√ºge `\| default("fallback")` hinzu |
| Syntaxfehler | Tippfehler im Variablennamen | √úberpr√ºfe die Schreibweise gegen verf√ºgbare Variablen |
| Bedingung funktioniert nicht | Falscher Vergleichsoperator | Verwende `==` nicht `=` |
| Filter wird nicht angewendet | Filter existiert nicht | √úberpr√ºfe die Schreibweise des Filternamens |

---

## Best Practices

<AccordionGroup>
  <Accordion title="Verwende immer Standardwerte" icon="shield">
    Gehe niemals davon aus, dass eine Variable einen Wert hat. Stelle immer Standardwerte bereit.

    ‚ùå **Schlecht:**
    ```jinja
    Hallo {{ contact.first_name }}!
    ```

    ‚úÖ **Gut:**
    ```jinja
    Hallo {{ contact.first_name | default("") }}!
    ```
  </Accordion>

  <Accordion title="Halte die Logik einfach" icon="lightbulb">
    Komplexe verschachtelte Bedingungen sind schwer zu debuggen. Halte es einfach.

    ‚ùå **Zu komplex:**
    ```jinja
    {% if account_tier == "VIP" and account_value > 10000 and region == "US" %}
    ```

    ‚úÖ **Einfacher:**
    ```jinja
    {% if account_tier == "VIP" %}
    ```
  </Accordion>

  <Accordion title="Teste Grenzf√§lle" icon="vial">
    Teste mit:
    - Fehlenden Daten (alle Felder leer)
    - Unerwarteten Werten
    - Sehr langen Strings
    - Sonderzeichen
  </Accordion>
</AccordionGroup>

---

## N√§chste Schritte

<CardGroup cols={2}>
  <Card title="Prompt Engineering Guide" icon="book" href="/de/build/conversation/prompt-engineering-guide">
    Sieh Variablen in Aktion mit vollst√§ndigen Beispielen
  </Card>
  <Card title="Teste deinen Agenten" icon="vial" href="/de/test/web-simulator">
    Teste, ob deine Variablen korrekt funktionieren
  </Card>
</CardGroup>
